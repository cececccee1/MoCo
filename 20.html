<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Guess Number - POST</title>
</head>
<body>
  <h1>猜數字表單 - POST</h1>

  <form id="guessPostForm">
    <input type="number" name="guess" placeholder="輸入 1~10 的數字">
    <button type="submit">送出 (POST)</button>
  </form>

  <script>
    const postForm = document.getElementById('guessPostForm');

    // 一樣用 httpbin 提供的測試 POST API
    const TEST_POST_URL = 'https://httpbin.org/post';

    postForm.onsubmit = async (e) => {
      e.preventDefault();

      // 先把要送出的欄位印出來
      const fd = new FormData(postForm);
      console.log('準備送出的欄位：');
      for (const [k, v] of fd.entries()) {
        console.log(k + ': ' + v);
      }

      try {
        const res = await fetch(TEST_POST_URL, {
          method: 'POST',
          body: fd
        });

        console.log('POST 狀態碼：', res.status);

        const text = await res.text();
        console.log('POST 原始回應文字：', text);

        // 如果確定是 JSON，再打開下面兩行
        // const data = JSON.parse(text);
        // console.log('POST 解析後 JSON：', data);
      } catch (err) {
        console.error('POST 請求失敗：', err);
      }
    };
  </script>
</body>
</html>
